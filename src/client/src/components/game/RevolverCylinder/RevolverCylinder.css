/* ==========================================
   REVOLVER CYLINDER - Animated Component
   ========================================== */

.revolver-cylinder {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  transform: scale(0.85);
}

/* SVG Container */
.revolver-cylinder__svg {
  transition: transform 0.3s ease, filter 0.3s ease;
  filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.4));
}

/* Active state - glowing */
.revolver-cylinder--active .revolver-cylinder__svg {
  filter:
    drop-shadow(0 0 20px rgba(212, 164, 24, 0.3))
    drop-shadow(0 8px 20px rgba(0, 0, 0, 0.5));
}

/* ==========================================
   SPIN ANIMATION
   ========================================== */

.revolver-cylinder--spinning .revolver-cylinder__svg {
  animation: cylinder-spin 0.5s linear;
}

@keyframes cylinder-spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(720deg); }
}

/* Stopping animation - dramatic pause */
.revolver-cylinder--stopping .revolver-cylinder__svg {
  animation: cylinder-stop 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}

@keyframes cylinder-stop {
  0% { transform: rotate(720deg); }
  100% { transform: rotate(780deg); }
}

/* ==========================================
   SHOT RESULT ANIMATIONS
   ========================================== */

.revolver-cylinder--shot-live .revolver-cylinder__svg {
  animation: shot-recoil-live 0.4s ease-out;
}

@keyframes shot-recoil-live {
  0% { transform: rotate(780deg) scale(1); }
  20% { transform: rotate(780deg) scale(1.1) translateX(-10px); }
  40% { transform: rotate(780deg) scale(1.05) translateX(5px); }
  60% { transform: rotate(780deg) scale(1.02) translateX(-3px); }
  100% { transform: rotate(780deg) scale(1) translateX(0); }
}

.revolver-cylinder--shot-blank .revolver-cylinder__svg {
  animation: shot-recoil-blank 0.3s ease-out;
}

@keyframes shot-recoil-blank {
  0%, 100% { transform: rotate(780deg); opacity: 1; }
  50% { transform: rotate(783deg); opacity: 0.8; }
}

/* ==========================================
   MUZZLE FLASH
   ========================================== */

.revolver-muzzle-flash {
  position: absolute;
  top: -30%;
  left: 50%;
  transform: translateX(-50%);
  width: 80px;
  height: 60px;
  pointer-events: none;
  z-index: 10;
}

.revolver-muzzle-flash--live {
  background: radial-gradient(ellipse at center bottom,
    rgba(255, 200, 100, 0.95) 0%,
    rgba(255, 150, 50, 0.8) 30%,
    rgba(255, 100, 0, 0.5) 60%,
    transparent 100%
  );
  animation: muzzle-flash-live 0.2s ease-out forwards;
}

.revolver-muzzle-flash--blank {
  background: radial-gradient(ellipse at center bottom,
    rgba(150, 150, 150, 0.7) 0%,
    rgba(100, 100, 100, 0.4) 50%,
    transparent 100%
  );
  animation: muzzle-flash-blank 0.25s ease-out forwards;
}

@keyframes muzzle-flash-live {
  0% { opacity: 1; transform: translateX(-50%) scale(1.5); }
  100% { opacity: 0; transform: translateX(-50%) scale(0.5) translateY(-20px); }
}

@keyframes muzzle-flash-blank {
  0% { opacity: 0.8; transform: translateX(-50%) scale(1); }
  100% { opacity: 0; transform: translateX(-50%) scale(1.3) translateY(-15px); }
}

/* ==========================================
   CHAMBER ANIMATIONS
   ========================================== */

.revolver-chamber .chamber-fill {
  transition: all 0.3s ease;
}

.revolver-cylinder--active .revolver-chamber--live .chamber-fill {
  filter: drop-shadow(0 0 6px rgba(239, 68, 68, 0.6));
}

.revolver-cylinder--active .revolver-chamber--blank .chamber-fill {
  filter: drop-shadow(0 0 6px rgba(59, 130, 246, 0.6));
}

/* Chamber highlight pulse */
.chamber-highlight {
  animation: chamber-pulse 1.5s ease-in-out infinite;
}

@keyframes chamber-pulse {
  0%, 100% {
    opacity: 0.8;
    stroke-width: 2px;
  }
  50% {
    opacity: 1;
    stroke-width: 3px;
  }
}

/* ==========================================
   FIRING ARROW (fixed position indicator)
   ========================================== */

.revolver-firing-arrow {
  position: absolute;
  top: -8px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 5;
  animation: arrow-pulse 1.5s ease-in-out infinite;
}

@keyframes arrow-pulse {
  0%, 100% {
    opacity: 0.7;
    transform: translateX(-50%) translateY(0);
  }
  50% {
    opacity: 1;
    transform: translateX(-50%) translateY(2px);
  }
}

/* ==========================================
   QUESTION MARK ANIMATION
   ========================================== */

.chamber-question {
  animation: question-pulse 2s ease-in-out infinite;
}

@keyframes question-pulse {
  0%, 100% { opacity: 0.7; }
  50% { opacity: 1; }
}

/* ==========================================
   SPENT/EMPTY CHAMBER
   ========================================== */

.chamber-spent {
  animation: chamber-spent-appear 0.3s ease;
}

@keyframes chamber-spent-appear {
  0% {
    opacity: 1;
  }
  50% {
    opacity: 0.3;
  }
  100% {
    opacity: 0.6;
  }
}

.chamber-spent-hole {
  animation: smoke-fade 0.5s ease-out;
}

@keyframes smoke-fade {
  0% {
    opacity: 0.8;
  }
  100% {
    opacity: 0.4;
  }
}

/* ==========================================
   SIZE VARIANTS
   ========================================== */

.revolver-cylinder--sm {
  transform: scale(0.7);
}

.revolver-cylinder--sm .revolver-cylinder__count {
  font-size: 0.9rem;
  padding: 0.3rem 0.6rem;
}

.revolver-cylinder--lg {
  transform: scale(1.2);
}

.revolver-cylinder--lg .revolver-cylinder__count {
  font-size: 1.3rem;
  padding: 0.5rem 1rem;
}

/* ==========================================
   RESPONSIVE
   ========================================== */

@media (max-width: 768px) {
  .revolver-cylinder {
    transform: scale(0.75);
  }

  .revolver-cylinder--sm {
    transform: scale(0.55);
  }

  .revolver-cylinder--lg {
    transform: scale(0.9);
  }
}

@media (max-width: 480px) {
  .revolver-cylinder {
    transform: scale(0.6);
  }

  .revolver-cylinder--sm {
    transform: scale(0.45);
  }

  .revolver-cylinder--lg {
    transform: scale(0.75);
  }

  .revolver-muzzle-flash {
    width: 60px;
    height: 45px;
  }
}
